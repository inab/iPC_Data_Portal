'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _graphql = require('graphql');

var _error = require('graphql/error');

var _language = require('graphql/language');

var _isEmailAddress = require('./isEmailAddress');

var _isEmailAddress2 = _interopRequireDefault(_isEmailAddress);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var coerceEmailAddress = function coerceEmailAddress(value) {
  if (!(0, _isEmailAddress2.default)(value)) {
    var message = 'EmailAddress can\'t represent value: ' + value;
    throw new TypeError(message);
  }
  return value;
};

var GraphQLEmailAddress = new _graphql.GraphQLScalarType({
  name: 'EmailAddress',
  serialize: coerceEmailAddress,
  parseValue: coerceEmailAddress,
  parseLiteral: function parseLiteral(valueNode) {
    var kind = valueNode.kind,
        value = valueNode.value;

    if (kind !== _language.Kind.STRING || !(0, _isEmailAddress2.default)(value)) {
      throw new _error.GraphQLError('Expected email address value but got: ' + value, [valueNode]);
    }
    return value;
  }
});

exports.default = GraphQLEmailAddress;