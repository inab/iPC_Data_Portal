'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getProcessedComponentThemeKeys = undefined;
exports.default = processComponentTheme;

var _mineralTheme = require('./mineralTheme');

var _mineralTheme2 = _interopRequireDefault(_mineralTheme);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var filterKeys = function filterKeys(source, exclusions) {
  return exclusions.length ? Object.keys(source).reduce(function (acc, key) {
    if (exclusions.indexOf(key) === -1) {
      acc[key] = source[key];
    }
    return acc;
  }, {}) : source;
};
var getProcessedComponentThemeKeys = exports.getProcessedComponentThemeKeys = function getProcessedComponentThemeKeys(componentTheme) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

  return Object.keys(processComponentTheme(componentTheme, options));
};

function processComponentTheme(componentThemeIn) {
  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var _options$baseTheme = options.baseTheme,
      baseTheme = _options$baseTheme === undefined ? _mineralTheme2.default : _options$baseTheme,
      _options$excludeKeys = options.excludeKeys,
      excludeKeys = _options$excludeKeys === undefined ? [] : _options$excludeKeys,
      includeBaseTheme = options.includeBaseTheme;

  var componentTheme = typeof componentThemeIn === 'function' ? componentThemeIn(baseTheme) : componentThemeIn;
  var filteredComponentTheme = filterKeys(componentTheme, excludeKeys);
  var filteredBaseTheme = filterKeys(baseTheme, excludeKeys);
  var filteredBaseThemeKeys = Object.keys(filteredBaseTheme);

  return includeBaseTheme ? filteredComponentTheme : filterKeys(filteredComponentTheme, filteredBaseThemeKeys);
}