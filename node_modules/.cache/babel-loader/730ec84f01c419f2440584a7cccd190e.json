{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _AggsWrapper = _interopRequireDefault(require(\"./AggsWrapper.js\"));\n\nvar _utils = require(\"../SQONView/utils\");\n\nrequire(\"./BooleanAgg.css\");\n\nvar _TextHighlight = _interopRequireDefault(require(\"../TextHighlight\"));\n\nvar _ToggleButton = _interopRequireDefault(require(\"../ToggleButton\"));\n\nvar _formatNumber = _interopRequireDefault(require(\"../utils/formatNumber\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nvar _default = function _default(_ref) {\n  var field = _ref.field,\n      buckets = _ref.buckets,\n      _ref$handleValueClick = _ref.handleValueClick,\n      handleValueClick = _ref$handleValueClick === void 0 ? function () {} : _ref$handleValueClick,\n      _ref$isActive = _ref.isActive,\n      isActive = _ref$isActive === void 0 ? function () {\n    return false;\n  } : _ref$isActive,\n      collapsible = _ref.collapsible,\n      WrapperComponent = _ref.WrapperComponent,\n      displayName = _ref.displayName,\n      highlightText = _ref.highlightText,\n      _ref$valueKeys = _ref.valueKeys,\n      valueKeys = _ref$valueKeys === void 0 ? {\n    \"true\": 'true',\n    \"false\": 'false'\n  } : _ref$valueKeys,\n      _ref$defaultDisplayKe = _ref.defaultDisplayKeys,\n      defaultDisplayKeys = _ref$defaultDisplayKe === void 0 ? {\n    any: 'Any',\n    \"true\": 'Yes',\n    \"false\": 'No'\n  } : _ref$defaultDisplayKe,\n      _ref$displayValues = _ref.displayValues,\n      extendedDisplayKeys = _ref$displayValues === void 0 ? {} : _ref$displayValues,\n      _ref$displayKeys = _ref.displayKeys,\n      displayKeys = _ref$displayKeys === void 0 ? Object.keys(defaultDisplayKeys).reduce(function (obj, x) {\n    return _objectSpread({}, obj, _defineProperty({}, x, extendedDisplayKeys[x] || defaultDisplayKeys[x]));\n  }, {}) : _ref$displayKeys,\n      rest = _objectWithoutProperties(_ref, [\"field\", \"buckets\", \"handleValueClick\", \"isActive\", \"collapsible\", \"WrapperComponent\", \"displayName\", \"highlightText\", \"valueKeys\", \"defaultDisplayKeys\", \"displayValues\", \"displayKeys\"]);\n\n  var trueBucket = buckets.find(function (_ref2) {\n    var key_as_string = _ref2.key_as_string;\n    return key_as_string === valueKeys[\"true\"];\n  });\n  var falseBucket = buckets.find(function (_ref3) {\n    var key_as_string = _ref3.key_as_string;\n    return key_as_string === valueKeys[\"false\"];\n  });\n  var missingKeyBucket = buckets.find(function (_ref4) {\n    var key_as_string = _ref4.key_as_string;\n    return !key_as_string;\n  });\n  var dotField = field.replace(/__/g, '.');\n  var isTrueActive = isActive({\n    value: valueKeys[\"true\"],\n    field: dotField\n  });\n  var isFalseActive = isActive({\n    value: valueKeys[\"false\"],\n    field: dotField\n  });\n  var isTrueBucketDisabled = trueBucket === undefined || (trueBucket === null || trueBucket === void 0 ? void 0 : trueBucket.doc_count) <= 0;\n  var isFalseBucketDisabled = falseBucket === undefined || (falseBucket === null || falseBucket === void 0 ? void 0 : falseBucket.doc_count) <= 0;\n\n  var handleChange = function handleChange(isTrue, field) {\n    if (isTrue !== undefined) {\n      handleValueClick({\n        bucket: isTrue ? trueBucket : falseBucket,\n        value: isTrue ? trueBucket : falseBucket || missingKeyBucket,\n        field: field,\n        generateNextSQON: function generateNextSQON(sqon) {\n          return (0, _utils.replaceSQON)({\n            op: 'and',\n            content: [{\n              op: 'in',\n              content: {\n                field: dotField,\n                value: [valueKeys[isTrue ? 'true' : 'false']]\n              }\n            }]\n          }, sqon);\n        }\n      });\n    } else {\n      handleValueClick({\n        value: 'Any',\n        field: field,\n        generateNextSQON: function generateNextSQON(sqon) {\n          return (0, _utils.removeSQON)(dotField, sqon);\n        }\n      });\n    }\n  };\n\n  var options = (displayKeys.any ? [{\n    value: undefined,\n    title: displayKeys.any\n  }] : []).concat([{\n    value: valueKeys[\"true\"],\n    disabled: isTrueBucketDisabled,\n    title: _react[\"default\"].createElement(_react[\"default\"].Fragment, null, _react[\"default\"].createElement(_TextHighlight[\"default\"], {\n      content: displayKeys[\"true\"],\n      highlightText: highlightText\n    }), _react[\"default\"].createElement(\"span\", {\n      className: \"bucket-count\",\n      style: {\n        marginLeft: 2\n      }\n    }, (0, _formatNumber[\"default\"])(isTrueBucketDisabled ? 0 : trueBucket.doc_count)))\n  }, {\n    value: valueKeys[\"false\"],\n    disabled: isFalseBucketDisabled,\n    title: _react[\"default\"].createElement(_react[\"default\"].Fragment, null, _react[\"default\"].createElement(_TextHighlight[\"default\"], {\n      content: displayKeys[\"false\"],\n      highlightText: highlightText\n    }), _react[\"default\"].createElement(\"span\", {\n      className: \"bucket-count\",\n      style: {\n        marginLeft: 2\n      }\n    }, (0, _formatNumber[\"default\"])(isFalseBucketDisabled ? 0 : falseBucket.doc_count)))\n  }]);\n  return _react[\"default\"].createElement(_AggsWrapper[\"default\"], {\n    displayName: displayName,\n    WrapperComponent: WrapperComponent,\n    collapsible: collapsible\n  }, _react[\"default\"].createElement(_ToggleButton[\"default\"], {\n    value: isTrueActive ? valueKeys[\"true\"] : isFalseActive ? valueKeys[\"false\"] : undefined,\n    options: options,\n    onChange: function onChange(_ref5) {\n      var value = _ref5.value;\n      handleChange(value === valueKeys[\"true\"] ? true : value === valueKeys[\"false\"] ? false : undefined, dotField);\n    }\n  }));\n};\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}