{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports[\"default\"] = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _reactComponentComponent = _interopRequireDefault(require(\"react-component-component\"));\n\nvar _chevronDown = _interopRequireDefault(require(\"react-icons/lib/fa/chevron-down\"));\n\nvar _chevronUp = _interopRequireDefault(require(\"react-icons/lib/fa/chevron-up\"));\n\nvar _utils = require(\"../utils\");\n\nvar _index = _interopRequireDefault(require(\"../filterComponents/index\"));\n\nvar _ClickAwayListener = _interopRequireDefault(require(\"../../utils/ClickAwayListener.js\"));\n\nvar _common = require(\"./common\");\n\nvar _config = require(\"../../utils/config\");\n\nvar _api = _interopRequireDefault(require(\"../../utils/api\"));\n\nrequire(\"react-tippy/dist/tippy.css\");\n\nvar _reactTippy = require(\"react-tippy\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar _default = function _default(props) {\n  var _props$onSqonChange = props.onSqonChange,\n      onSqonChange = _props$onSqonChange === void 0 ? function (fullSqon) {} : _props$onSqonChange,\n      _props$onContentRemov = props.onContentRemove,\n      onContentRemove = _props$onContentRemov === void 0 ? function () {} : _props$onContentRemov,\n      fullSyntheticSqon = props.fullSyntheticSqon,\n      _props$sqonPath = props.sqonPath,\n      sqonPath = _props$sqonPath === void 0 ? [] : _props$sqonPath,\n      _props$opDisplayNameM = props.opDisplayNameMap,\n      opDisplayNameMap = _props$opDisplayNameM === void 0 ? _utils.FIELD_OP_DISPLAY_NAME : _props$opDisplayNameM,\n      _props$arrangerProjec = props.arrangerProjectId,\n      arrangerProjectId = _props$arrangerProjec === void 0 ? _config.PROJECT_ID : _props$arrangerProjec,\n      arrangerProjectIndex = props.arrangerProjectIndex,\n      _props$FieldOpModifie = props.FieldOpModifierContainer,\n      FieldOpModifierContainer = _props$FieldOpModifie === void 0 ? undefined : _props$FieldOpModifie,\n      _props$api = props.api,\n      api = _props$api === void 0 ? _api[\"default\"] : _props$api,\n      getActiveExecutableSqon = props.getActiveExecutableSqon;\n  var fieldOpObj = (0, _utils.getOperationAtPath)(sqonPath)(fullSyntheticSqon);\n  var op = fieldOpObj.op,\n      _fieldOpObj$content = fieldOpObj.content,\n      field = _fieldOpObj$content.field,\n      value = _fieldOpObj$content.value;\n  var initialState = {\n    isOpen: false\n  };\n\n  var onClickAway = function onClickAway(s) {\n    return function () {\n      s.setState({\n        isOpen: false\n      });\n    };\n  };\n\n  var toggleDropdown = function toggleDropdown(s) {\n    return function () {\n      return s.setState({\n        isOpen: !s.state.isOpen\n      });\n    };\n  };\n\n  var onRemoveClick = function onRemoveClick() {\n    onContentRemove(fieldOpObj);\n  };\n\n  var onNewSqonSubmitted = function onNewSqonSubmitted(s) {\n    return function (newSqon) {\n      onSqonChange(newSqon);\n      toggleDropdown(s)();\n    };\n  };\n\n  return _react[\"default\"].createElement(_reactComponentComponent[\"default\"], {\n    initialState: initialState\n  }, function (s) {\n    return _react[\"default\"].createElement(_utils.DisplayNameMapContext.Consumer, null, function () {\n      var fieldDisplayNameMap = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n      return _react[\"default\"].createElement(\"span\", {\n        className: \"fieldOp pill\"\n      }, _react[\"default\"].createElement(\"span\", {\n        className: 'opContainer'\n      }, _react[\"default\"].createElement(\"span\", {\n        className: \"fieldName\"\n      }, fieldDisplayNameMap[field] || field, ' '), _react[\"default\"].createElement(\"span\", {\n        className: \"opName\"\n      }, \" is \".concat(Array.isArray(value) && value.length > 1 || _utils.RANGE_OPS.includes(op) ? opDisplayNameMap[op] : '', \" \"))), _react[\"default\"].createElement(_ClickAwayListener[\"default\"], {\n        className: 'selectionContainer',\n        handler: onClickAway(s)\n      }, _react[\"default\"].createElement(\"span\", {\n        className: 'valueDisplay',\n        onClick: toggleDropdown(s)\n      }, _react[\"default\"].createElement(_reactTippy.Tooltip, {\n        position: \"bottom\",\n        html: Array.isArray(value) ? value.join(', ') : value\n      }, Array.isArray(value) ? value.join(', ') : value, ' ')), _react[\"default\"].createElement(\"span\", {\n        onClick: toggleDropdown(s)\n      }, _react[\"default\"].createElement(\"span\", {\n        style: {\n          pointerEvents: 'none'\n        }\n      }, s.state.isOpen ? _react[\"default\"].createElement(_chevronUp[\"default\"], null) : _react[\"default\"].createElement(_chevronDown[\"default\"], null))), s.state.isOpen && _react[\"default\"].createElement(\"div\", {\n        className: \"fieldFilterContainer\"\n      }, _react[\"default\"].createElement(_index[\"default\"], {\n        arrangerProjectId: arrangerProjectId,\n        arrangerProjectIndex: arrangerProjectIndex,\n        field: field,\n        sqonPath: sqonPath,\n        initialSqon: fullSyntheticSqon,\n        onSubmit: onNewSqonSubmitted(s),\n        onCancel: toggleDropdown(s),\n        fieldDisplayNameMap: fieldDisplayNameMap,\n        opDisplayNameMap: opDisplayNameMap,\n        ContainerComponent: FieldOpModifierContainer,\n        getExecutableSqon: getActiveExecutableSqon,\n        api: api\n      }))), _react[\"default\"].createElement(_common.PillRemoveButton, {\n        onClick: onRemoveClick\n      }));\n    });\n  });\n};\n\nexports[\"default\"] = _default;","map":null,"metadata":{},"sourceType":"script"}